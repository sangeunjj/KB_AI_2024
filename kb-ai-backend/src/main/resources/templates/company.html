<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/company.css">
    <title>Company Page</title>
</head>
<body>
<div class="sidebar active" id="sidebar">
    <div class="profile">
        <img class="profile-image" th:if="${session.member?.gender == 1}" th:src="@{/icons/men.png}" alt="Profile Picture">
        <img class="profile-image" th:if="${session.member?.gender == 2}" th:src="@{/icons/women.png}" alt="Profile Picture">
        <img class="profile-image" th:if="${session.member?.gender != 1 and session.member?.gender != 2}" th:src="@{/icons/default-profile1.png}" alt="Profile Picture">
        <span id="username" th:text="${session.member?.username ?: '익명'}">김대리</span>
    </div>
    <div class="menu-items">
        <a href="/"><img src="/icons/chat2.png" alt="Chat Icon" class="icon" width="25px" height="25px">Chat</a>
        <a href="/company"><img src="/icons/company2.png" alt="Company Icon" class="icon" width="25px" height="25px">Company</a>
        <a href="/report1"><img src="/icons/report9.png" alt="Report Icon" class="icon" width="25px" height="25px">Report</a>
    </div>
    <div class="auth">
        <a th:if="${session.member}" href="/logout"><img src="/icons/logout1.png" alt="Logout Icon" class="icon" width="25px" height="25px">Log Out</a>
        <a th:unless="${session.member}" href="/login"><img src="/icons/login.png" alt="Login Icon" class="icon" width="25px" height="25px">Log In</a>
    </div>
</div>
<div class="content expanded" id="content">
    <div class="navbar">
        <div class="left-section">
            <div class="toggle-btn" onclick="toggleSidebar()">☰</div>
            <div class="logo">KB <span>ANALYSIS</span></div>
        </div>
        <div class="search-container">
            <input type="text" id="search-input" placeholder="기업명을 입력하세요">
            <button class="search-clear">X</button>
        </div>
    </div>
    <div class="main-content">
        <div class="company-container">
            <div class="company-list" id="company-list">
                <!-- 기업 리스트가 여기에 표시됩니다 -->
            </div>
            <div class="company-details" id="company-details">
                <!-- 기업 상세 정보가 여기에 표시됩니다 -->
            </div>
        </div>
    </div>
</div>
<script th:src="@{/js/navbar.js}"></script>
<script>
    const companies = [
        { name: '에이젠글로벌', details: '에이젠글로벌 상세 정보' },
        { name: '앤톡', details: '앤톡 상세 정보' },
        { name: '에이젠글로벌', details: '에이젠글로벌 상세 정보' },
        { name: '앤톡', details: '앤톡 상세 정보' },
        { name: '에이젠글로벌', details: '에이젠글로벌 상세 정보' },
        { name: '앤톡', details: '앤톡 상세 정보' },
        { name: '에이젠글로벌', details: '에이젠글로벌 상세 정보' },
        { name: '앤톡', details: '앤톡 상세 정보' },
        { name: '에이젠글로벌', details: '에이젠글로벌 상세 정보' },
        { name: '앤톡', details: '앤톡 상세 정보' }
        // 추가 기업 데이터
    ];

    function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const content = document.getElementById("content");
        sidebar.classList.toggle("active");
        content.classList.toggle("expanded");
    }

    document.querySelector('.search-clear').addEventListener('click', function() {
        document.getElementById('search-input').value = '';
        displayCompanies(companies);
    });

    function searchCompany() {
        const searchInput = document.getElementById('search-input').value.toLowerCase();
        const filteredCompanies = companies.filter(company => company.name.toLowerCase().includes(searchInput));
        displayCompanies(filteredCompanies);
    }

    function displayCompanies(companyList) {
        const companyListDiv = document.getElementById('company-list');
        companyListDiv.innerHTML = '';

        companyList.forEach(company => {
            const companyDiv = document.createElement('div');
            companyDiv.textContent = company.name;
            companyDiv.className = 'company-item';
            companyDiv.onclick = () => displayCompanyDetails(company);
            companyListDiv.appendChild(companyDiv);
        });
    }

    function displayCompanyDetails(company) {
        const companyDetailsDiv = document.getElementById('company-details');
        companyDetailsDiv.textContent = company.details;
    }

    document.getElementById('search-input').addEventListener('input', searchCompany);

    // 초기 기업 리스트 표시
    displayCompanies(companies);
</script>
</body>
</html>